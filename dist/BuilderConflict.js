import{joinOperations as e,operation as t}from"./services/OperationService.js";import{Builder as s}from"./Builder.js";export class BuilderConflict extends s{constructor(e=[],t){super(),this.conflictDoNothing=!1,this.internalColumn(...e),this.conflictWheresExpressions=t}doNothing(){return this.conflictDoNothing=!0,this}set(e,s){return this.setsOperations.push(t({type:"SET",identifier:e,expression:s})),this}where(...e){return this.internalWhere(...e)}getOperations(){let s=["ON CONFLICT "];if(this.columnsOperations.length>0&&s.push(...e(this.columnsOperations,", ",!0)," "),void 0!==this.conflictWheresExpressions){let e=t({type:"AND",expressions:[this.conflictWheresExpressions],includeParens:!1});e.length>0&&s.push("WHERE ",...e," ")}return this.conflictDoNothing?s.push("DO NOTHING"):s.push("DO UPDATE "),this.generateSetOperation(s),this.generateWhereOperation(s),s}}